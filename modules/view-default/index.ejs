<link rel="stylesheet" href="/css/page-transitions.css">
<link rel="stylesheet" href="/css/view-default.css">
<script src="/js/page-transitions.js"></script>

<style type="text/css">

.side-menu {
	position: absolute;

	top: 0;
	left: 0;
	left: -300px;
	width: 300px;
	height: 100%;
	z-index: 100;
	
	background: #48a770;
	-webkit-transition: left 0.5s 0.6s;
			transition: left 0.5s 0.6s;
}

#wrapper{
	-webkit-transition: opacity 0.5s;
			transition: opacity 0.5s;
}

.menu-open .side-menu,
.side-menu:hover {
	left: 0px;
}

.menu-open .side-menu,
.side-menu:hover ~ #wrapper{
	opacity: 0.3;
}

.side-menu .handle {
	position: absolute;
	top: 0px;
	right: -50px;
	/*top: 50%;*/
	width: 50px;
	height: 100%;
	opacity: 0;
	-webkit-transition: opacity 0.5s;
			transition: opacity 0.5s;
	/*background-color: rgba(0,0,0,0.5);*/
	background: -moz-linear-gradient(left, rgba(0,0,0,0.65) 0%, rgba(0,0,0,0) 100%);
	background: -webkit-gradient(linear, left top, right top, color-stop(0%,rgba(0,0,0,0.65)),
		color-stop(100%,rgba(0,0,0,0)));
	background: -webkit-linear-gradient(left, rgba(0,0,0,0.65) 0%,rgba(0,0,0,0) 100%);
	background: -o-linear-gradient(left, rgba(0,0,0,0.65) 0%,rgba(0,0,0,0) 100%);
	background: -ms-linear-gradient(left, rgba(0,0,0,0.65) 0%,rgba(0,0,0,0) 100%);
	background: linear-gradient(to right, rgba(0,0,0,0.65) 0%,rgba(0,0,0,0) 100%);
	filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#a6000000',
		endColorstr='#00000000',GradientType=1 );
}
.side-menu:hover .handle {
	opacity: 0.5;
}
.side-menu .handle::before{
	top: 50%;
	position: relative;
	font-size: 30px;
	color: #FFF;
}


/* content style */
/*.side-menu ul {
	margin: 0;
	padding: 0;
	list-style: none;
}

.side-menu h2 {
	margin: 0;
	padding: 1em;
	color: rgba(0,0,0,0.4);
	text-shadow: 0 0 1px rgba(0,0,0,0.1);
	font-weight: 300;
	font-size: 2em;
}

.side-menu ul li a {
	display: block;
	padding: 1em 1em 1em 1.2em;
	outline: none;
	box-shadow: inset 0 -1px rgba(0,0,0,0.2);
	color: #f3efe0;
	text-transform: uppercase;
	text-shadow: 0 0 1px rgba(255,255,255,0.1);
	letter-spacing: 1px;
	font-weight: 400;
	-webkit-transition: background 0.3s, box-shadow 0.3s;
	transition: background 0.3s, box-shadow 0.3s;
}

.side-menu ul li:first-child a {
	box-shadow: inset 0 -1px rgba(0,0,0,0.2), inset 0 1px rgba(0,0,0,0.2);
}

.side-menu ul li a:hover {
	background: rgba(0,0,0,0.2);
	box-shadow: inset 0 -1px rgba(0,0,0,0);
	color: #fff;
}*/


</style>

<div id="container" class="">

	<nav class="side-menu">
		<h2 class="text-center"><span class="glyphicon glyphicon-cog"></span> Settings</h2>
		<ul class="">
			<li><a class="icon icon-data" href="#">Here</a></li>
			<li><a class="icon icon-location" href="#">Comes</a></li>
			<li><a class="icon icon-study" href="#">the</a></li>
			<li><a class="icon icon-photo" href="#">SUPER</a></li>
			<li><a class="icon icon-wallet" href="#">COOL</a></li>
			<li><a class="icon icon-wallet" href="#">SIDE</a></li>
			<li><a class="icon icon-wallet" href="#">MENU</a></li>
		</ul>
		<span class="handle glyphicon glyphicon-chevron-right"></span>
	</nav>

	<div id="wrapper">

		<div id="pages" class="pt-perspective">

			<div class="match pt-page">

				<!-- HEADER -->
				<div class="field-top shadow-md">
					<div class="field-title">FIELD</div>
					<div class="field">A</div>
				</div>
				<div class="group-name title-top-xs shadow-md">
					GROUP A
				</div>
				<div class="timer title-top-lg shadow-lg">
					15:00
				</div>

				<!-- TEAMS and SCORES-->
				<div class="flag-3d flag-3d-left show">
					<img class="flag" src="/flags/4x3/br.svg"/>
				</div>
				<div class="team left">
					<div class="team-score">2</div>
					<div class="team-name-container"><div class="team-name">EMEROTECOS TEAM</div></div>
				</div>

				<div class="flag-3d flag-3d-right show">
					<img class="flag" src="/flags/4x3/us.svg"/>
				</div>
				<div class="team right">
					<div class="team-score">19</div>
					<div class="team-name-container"><div class="team-name">THE DOODLES</div></div>
				</div>

			</div>

			<div class="round pt-page">

				<!-- FLAG -->
				<div class="flag-3d flag-3d-left">
					<img class="flag" src="/flags/4x3/br.svg"/>
				</div>

				<!-- HEADER -->
				<div class="field-top shadow-md">
					<div class="field-title">FIELD</div>
					<div class="field">A</div>
				</div>
				<div class="table-name title-top-xs shadow-md">
					OFICIAL ROUND
				</div>
				<div class="timer title-top-lg shadow-lg">
					15:00
				</div>

				<!-- ROUND and TEAM -->
				<div class="info">
					<div class="round-name shadow-lg">ROUND</div>
					<div class="round-number">2</div>
					<div class="round-team">EMEROTECOS</div>
				</div>

			</div>

			<div class="show groups pt-page">

				<div class="container">

					<div class="board no-space col-md-12" style="margin-top: 50px;">

						<div class="board-heading heading-lg heading-orange" style="z-index: 20;"><h2>GROUP A</h2></div>
						<div class="row">

							<div class="board col-md-6" style="z-index: 15;">
								<div class="board-heading heading-orange">

									<div class="pull-right dotstyle dotstyle-scaleup">
										<ul><li><a href="#"></a></li><li><a href="#"></a></li><li class="current"><a href="#"></a></li></ul>
									</div>

									<h3>SCORES</h3>

								</div>

								<table class="table-pretty table-orange">
									<thead>
										<tr>
											<th>Rank</th>
											<th>Team</th>
											<th>Score 1</th>
											<th>Score 2</th>
											<th>Score 3</th>
											<th>Score 4</th>
											<th>Total</th>
										</tr>
									</thead>
									<tbody>
										<tr>
											<td>1</td>
											<td>Emerotecos</td>
											<td>123</td>
											<td>513</td>
											<td>103</td>
											<td>-</td>
											<td>45.6</td>
										</tr>
										<tr>
											<td>2</td>
											<td>Team Boringness</td>
											<td>14</td>
											<td>753</td>
											<td>43</td>
											<td>-</td>
											<td>49.6</td>
										</tr>
										<tr>
											<td>1</td>
											<td>Emerotecos</td>
											<td>123</td>
											<td>513</td>
											<td>103</td>
											<td>-</td>
											<td>45.6</td>
										</tr>
										<tr>
											<td>2</td>
											<td>Team Boringness</td>
											<td>14</td>
											<td>753</td>
											<td>43</td>
											<td>-</td>
											<td>49.6</td>
										</tr>
										<tr>
											<td>1</td>
											<td>Emerotecos</td>
											<td>123</td>
											<td>513</td>
											<td>103</td>
											<td>-</td>
											<td>45.6</td>
										</tr>
										<tr>
											<td>2</td>
											<td>Team Boringness</td>
											<td>14</td>
											<td>753</td>
											<td>43</td>
											<td>-</td>
											<td>49.6</td>
										</tr>
									</tbody>
								</table>
							</div>
							<div class="board col-md-6" style="z-index: 10;">
								<div class="board-heading heading-orange">
									<div class="pull-right dotstyle dotstyle-scaleup">
										<ul><li><a href="#"></a></li><li><a href="#"></a></li><li class="current"><a href="#"></a></li></ul>
									</div>

									<h3>MATCHES</h3>
								</div>
							</div>
						</div>
					</div>

				</div>

			</div>

			<div class="pt-page bg-blue"  style="text-align: center;">
				<h1 style="position: relative; margin-top: -200px; top: 50%; font-size: 400px; line-height: 400px; color: #F0F0F0;">COOL</h1>
			</div>

			<div class="pt-page bg-red"  style="text-align: center;">
				<h1 style="position: relative; margin-top: -200px; top: 50%; font-size: 400px; line-height: 400px; color: #F0F0F0;">HUN?</h1>
			</div>

			<div class="pt-page bg-orange"  style="text-align: center;">
				<h1 style="position: relative; margin-top: -200px; top: 50%; font-size: 400px; line-height: 400px; color: #F0F0F0;">=D</h1>
			</div>

			<div class="pt-page bg-purple"  style="text-align: center;">
				<h1 style="position: relative; margin-top: -200px; top: 50%; font-size: 400px; line-height: 400px; color: #F0F0F0;">:E</h1>
			</div>
			<!-- <div class="pt-page bg-purple"> <h1>C</h1> </div> -->
			<!-- <div class="pt-page bg-red"> <h1>D</h1> </div> -->
		</div>

		<div id="page-navigation" class="dotstyle dotstyle-scaleup">
			<ul>
				
			</ul>
		</div>

		<footer>
			<span class="logo">
				<img src="/img/logo_robocup.png"/>
			</span>
			
			<h1 class="title">Rescue B</h1>

			<p class="footnote">
				Developed by Ivan Seidel | <a href="mailto:ivanseidel@gmail.com">ivanseidel@gmail.com</a>
			</p>
		</footer>

	</div>

</div>



<script type="text/javascript">


/*
	Page indicator View
*/
var PageIndicator = Backbone.View.extend({

	page: -1,
	count: 0,

	initialize: function(){

	},

	render: function(){
		// var currentCount  = this.$el.length;
		var targetTotal = this.getCount();

		// Remove extra items
		var safe = 0;
		while(this.$el.children().length > targetTotal){
			console.log('creating element');
			this.removeElement();
			safe++;
			if(safe > 100)
				break;
		}
		// Add new items
		safe = 0;
		while(this.$el.children().length < targetTotal){
			this.addElement();
			safe++;
			if(safe > 100)
				break;
		}

		// Reset current item classes
		var $lis = this.$el.children();
		$lis.removeClass('current');
		$lis.eq(this.getPage()).addClass('current');

		return this;
	},

	// Remove the element "el". If not set, will remove the last one
	removeElement: function(el){
		if(!el)
			el = this.$el.last();
		else
			el = $(el);

		el.fadeOut(el.remove);
	},

	addElement: function(){
		var element = $('<li><a href="#"></a></li>');
		this.$el.append(element);
		return element;
	},

	/*
		Getters and setters for Page and Count
	*/
	getPage: function(){
		if(_.isFunction(this.page))
			return this.page();
		return this.page;
	},
	setPage: function(page){
		this.page = page;
		this.render();
		return this;
	},

	getCount: function(){
		if(_.isFunction(this.count))
			return this.count();
		return this.count;
	},
	setCount: function(count){
		this.count = count;
		this.render();
		return this;
	}
});



var GlobalViewController = Backbone.View.extend({

	pageIndicator: null,

	initialize: function () {
		console.log('Init GlobalViewController');
		var view = this;

		// Instantiate the transition object
		this.pageTransitions = new App.Views.PageTransitions();

		// Instantiate the page indicator and setup it
		this.pageIndicator = new PageIndicator({
			el: '#page-navigation ul'
		});
		this.pageIndicator.setCount(function(){
			// Adapter function to pages indicator
			return $('.pt-page').length;
		});

		var testViews = $('.pt-page');
		var i = -1;
		setInterval(next, 5000);
		// next();
		function next(){
			if(i++ >= testViews.length - 1)
				i = 0;

			view.pageIndicator.setPage(i);

			var $view = testViews.eq(i);

			var animationsKeys = _.keys(view.pageTransitions.animations);
			// var key = 'rotateCubeTopOut';
			var key = _.sample(animationsKeys);
			var animation = view.pageTransitions.animations[key];
			view.pageTransitions.changePage($view, {
				animation: animation
			});
		}
	},
});


$(document).ready(function(){


	setInterval(function(){
		// $('#container').toggleClass('menu-open');
		// $('.flag-3d').toggleClass('flag-hide');
	}, 3000);
	// pageIndicator.setCount(10);

	var viewController = new GlobalViewController();
	viewController.pageTransitions.changePage($('.pt-page.show'))

	viewController.render();
})


</script>